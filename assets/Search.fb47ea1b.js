import{F as e}from"./Form.bdf50ef4.js";import{d as t,a5 as a,m as o,H as s,s as n,o as i,c as l,g as r,w as c,a as d,Z as m,v as u,W as p,Y as f,x as h,t as y,k as x,bP as b,b1 as g}from"./index.97fe2dd0.js";import{E as k}from"./el-button.c0a5966c.js";import{u as v}from"./useForm.99c39cdb.js";const w={key:0},F=t({name:"Search",props:{schema:{type:Array,default:()=>[]},isCol:a.bool.def(!1),labelWidth:a.oneOfType([String,Number]).def("auto"),layout:a.string.validate((e=>["inline","bottom"].includes(e))).def("inline"),buttomPosition:a.string.validate((e=>["left","center","right"].includes(e))).def("center"),showSearch:a.bool.def(!0),showReset:a.bool.def(!0),expand:a.bool.def(!1),expandField:a.string.def("")},emits:["search","reset"],setup(t,{emit:a}){const F=t,{t:C}=x(),_=o(!0),R=s((()=>{let e=b(F.schema);if(F.expand&&F.expandField&&!d(_)){const t=g(e,(e=>e.field===F.expandField));if(t>-1){const a=e.length;e.splice(t+1,a)}}return"inline"===F.layout&&(e=e.concat([{field:"action",formItemProps:{labelWidth:"0px"}}])),e})),{register:S,elFormRef:j,methods:P}=v(),W=async()=>{var e;await(null==(e=d(j))?void 0:e.validate((async e=>{if(e){const{getFormData:e}=P,t=await e();a("search",t)}})))},q=async()=>{var e;null==(e=d(j))||e.resetFields();const{getFormData:t}=P,o=await t();a("reset",o)},A=s((()=>({textAlign:F.buttomPosition}))),D=()=>{var e;null==(e=d(j))||e.resetFields(),_.value=!d(_)};return(a,o)=>{const s=n("Icon");return i(),l(f,null,[r(d(e),{"is-custom":!1,"label-width":t.labelWidth,"hide-required-asterisk":"",inline:"","is-col":t.isCol,schema:d(R),onRegister:d(S)},{action:c((()=>["inline"===t.layout?(i(),l("div",w,[t.showSearch?(i(),u(d(k),{key:0,type:"primary",onClick:W},{default:c((()=>[r(s,{icon:"ep:search",class:"mr-5px"}),h(" "+y(d(C)("common.query")),1)])),_:1})):p("",!0),t.showReset?(i(),u(d(k),{key:1,onClick:q},{default:c((()=>[r(s,{icon:"ep:refresh-right",class:"mr-5px"}),h(" "+y(d(C)("common.reset")),1)])),_:1})):p("",!0),t.expand?(i(),u(d(k),{key:2,text:"",onClick:D},{default:c((()=>[h(y(d(C)(_.value?"common.shrink":"common.expand"))+" ",1),r(s,{icon:_.value?"ant-design:up-outlined":"ant-design:down-outlined"},null,8,["icon"])])),_:1})):p("",!0)])):p("",!0)])),_:1},8,["label-width","is-col","schema","onRegister"]),"bottom"===t.layout?(i(),l("div",{key:0,style:m(d(A))},[t.showSearch?(i(),u(d(k),{key:0,type:"primary",onClick:W},{default:c((()=>[r(s,{icon:"ep:search",class:"mr-5px"}),h(" "+y(d(C)("common.query")),1)])),_:1})):p("",!0),t.showReset?(i(),u(d(k),{key:1,onClick:q},{default:c((()=>[r(s,{icon:"ep:refresh-right",class:"mr-5px"}),h(" "+y(d(C)("common.reset")),1)])),_:1})):p("",!0),t.expand?(i(),u(d(k),{key:2,text:"",onClick:D},{default:c((()=>[h(y(d(C)(_.value?"common.shrink":"common.expand"))+" ",1),r(s,{icon:_.value?"ant-design:up-outlined":"ant-design:down-outlined"},null,8,["icon"])])),_:1})):p("",!0)],4)):p("",!0)],64)}}});export{F as _};

var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(a,t,n)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,i=(e,a)=>{for(var t in a||(a={}))o.call(a,t)&&l(e,t,a[t]);if(n)for(var t of n(a))s.call(a,t)&&l(e,t,a[t]);return e},r=(e,n)=>a(e,t(n));import{_ as u}from"./ContentWrap.8a9e0526.js";import{bA as c,d,ah as m,o as f,c as p,e as v,E as g,F as b,bR as w,Q as h,bt as x,m as k,bS as z,H as y,aC as C,q as O,M as I,C as j,v as V,g as _,w as M,n as L,a as T,ar as A,W as B,P as N,aP as D,Y as E,X as R,a7 as P,az as H,aL as S,Z as X,z as Y,h as F,bu as $,_ as W,bT as Z,G,$ as q,a5 as Q,V as U,bU as J,bM as K,k as ee,x as ae,t as te}from"./index.1e76493d.js";import{m as ne}from"./typescript2.50fc0493.js";import{i as oe}from"./browser2.eb1cd9f6.js";import{u as se}from"./index2.c0b90f52.js";import{a as le}from"./arrow-left.1f3d9e4a.js";import{a as ie}from"./arrow-right.a0d8de2b.js";import{d as re}from"./debounce.8142e496.js";import{E as ue}from"./el-button.0e8e2c99.js";import"./el-card.12fb1956.js";import"./el-popper.21023e6d.js";import"./index2.6dff78a3.js";import"./index2.42b90544.js";import"./index2.da80a80d.js";function ce(e,a,t){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return c(t)&&(n="leading"in t?!!t.leading:n,o="trailing"in t?!!t.trailing:o),re(e,a,{leading:n,maxWait:a,trailing:o})}const de=d({name:"FullScreen"}),me={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},fe=[v("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1)];var pe=m(de,[["render",function(e,a,t,n,o,s){return f(),p("svg",me,fe)}]]);const ve=d({name:"RefreshLeft"}),ge={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},be=[v("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"},null,-1)];var we=m(ve,[["render",function(e,a,t,n,o,s){return f(),p("svg",ge,be)}]]);const he=d({name:"RefreshRight"}),xe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ke=[v("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"},null,-1)];var ze=m(he,[["render",function(e,a,t,n,o,s){return f(),p("svg",xe,ke)}]]);const ye=d({name:"ScaleToOriginal"}),Ce={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Oe=[v("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zM512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412zM512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512z"},null,-1)];var Ie=m(ye,[["render",function(e,a,t,n,o,s){return f(),p("svg",Ce,Oe)}]]);const je=d({name:"ZoomIn"}),Ve={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},_e=[v("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zm-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64h96z"},null,-1)];var Me=m(je,[["render",function(e,a,t,n,o,s){return f(),p("svg",Ve,_e)}]]);const Le=d({name:"ZoomOut"}),Te={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ae=[v("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zM352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64z"},null,-1)];var Be=m(Le,[["render",function(e,a,t,n,o,s){return f(),p("svg",Te,Ae)}]]);const Ne=g({urlList:{type:b(Array),default:()=>ne([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0}}),De=["src"];const Ee=q(W(d(r(i({},{name:"ElImageViewer"}),{props:Ne,emits:{close:()=>!0,switch:e=>"number"==typeof e},setup(e,{emit:a}){const t=e,n={CONTAIN:{name:"contain",icon:w(pe)},ORIGINAL:{name:"original",icon:w(Ie)}},o=oe()?"DOMMouseScroll":"mousewheel",{t:s}=se(),l=h("image-viewer"),{nextZIndex:u}=x(),c=k(),d=k([]),m=z(),g=k(!0),b=k(t.initialIndex),W=k(n.CONTAIN),q=k({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),Q=y((()=>{const{urlList:e}=t;return e.length<=1})),U=y((()=>0===b.value)),J=y((()=>b.value===t.urlList.length-1)),K=y((()=>t.urlList[b.value])),ee=y((()=>{const{scale:e,deg:a,offsetX:t,offsetY:o,enableTransition:s}=q.value;let l=t/e,i=o/e;switch(a%360){case 90:case-270:[l,i]=[i,-l];break;case 180:case-180:[l,i]=[-l,-i];break;case 270:case-90:[l,i]=[-i,l]}const r={transform:`scale(${e}) rotate(${a}deg) translate(${l}px, ${i}px)`,transition:s?"transform .3s":""};return W.value.name===n.CONTAIN.name&&(r.maxWidth=r.maxHeight="100%"),r})),ae=y((()=>C(t.zIndex)?t.zIndex:u()));function te(){m.stop(),a("close")}function ne(){g.value=!1}function re(e){g.value=!1,e.target.alt=s("el.image.error")}function ue(e){if(g.value||0!==e.button||!c.value)return;q.value.enableTransition=!1;const{offsetX:a,offsetY:t}=q.value,n=e.pageX,o=e.pageY,s=ce((e=>{q.value=r(i({},q.value),{offsetX:a+e.pageX-n,offsetY:t+e.pageY-o})})),l=Z(document,"mousemove",s);Z(document,"mouseup",(()=>{l()})),e.preventDefault()}function de(){q.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function me(){if(g.value)return;const e=Object.keys(n),a=Object.values(n),t=W.value.name,o=(a.findIndex((e=>e.name===t))+1)%e.length;W.value=n[e[o]],de()}function fe(){if(U.value&&!t.infinite)return;const e=t.urlList.length;b.value=(b.value-1+e)%e}function ve(){if(J.value&&!t.infinite)return;const e=t.urlList.length;b.value=(b.value+1)%e}function ge(e,a={}){if(g.value)return;const{zoomRate:t,rotateDeg:n,enableTransition:o}=i({zoomRate:1.4,rotateDeg:90,enableTransition:!0},a);switch(e){case"zoomOut":q.value.scale>.2&&(q.value.scale=Number.parseFloat((q.value.scale/t).toFixed(3)));break;case"zoomIn":q.value.scale<7&&(q.value.scale=Number.parseFloat((q.value.scale*t).toFixed(3)));break;case"clockwise":q.value.deg+=n;break;case"anticlockwise":q.value.deg-=n}q.value.enableTransition=o}return O(K,(()=>{I((()=>{const e=d.value[0];(null==e?void 0:e.complete)||(g.value=!0)}))})),O(b,(e=>{de(),a("switch",e)})),j((()=>{var e,a;!function(){const e=ce((e=>{switch(e.code){case G.esc:t.closeOnPressEscape&&te();break;case G.space:me();break;case G.left:fe();break;case G.up:ge("zoomIn");break;case G.right:ve();break;case G.down:ge("zoomOut")}})),a=ce((e=>{ge((e.wheelDelta?e.wheelDelta:-e.detail)>0?"zoomIn":"zoomOut",{zoomRate:1.2,enableTransition:!1})}));m.run((()=>{Z(document,"keydown",e),Z(document,o,a)}))}(),null==(a=null==(e=c.value)?void 0:e.focus)||a.call(e)})),(e,a)=>(f(),V($,{to:"body",disabled:!e.teleported},[_(F,{name:"viewer-fade",appear:""},{default:M((()=>[v("div",{ref_key:"wrapper",ref:c,tabindex:-1,class:L(T(l).e("wrapper")),style:X({zIndex:T(ae)})},[v("div",{class:L(T(l).e("mask")),onClick:a[0]||(a[0]=A((a=>e.hideOnClickModal&&te()),["self"]))},null,2),B(" CLOSE "),v("span",{class:L([T(l).e("btn"),T(l).e("close")]),onClick:te},[_(T(N),null,{default:M((()=>[_(T(D))])),_:1})],2),B(" ARROW "),T(Q)?B("v-if",!0):(f(),p(E,{key:0},[v("span",{class:L([T(l).e("btn"),T(l).e("prev"),T(l).is("disabled",!e.infinite&&T(U))]),onClick:fe},[_(T(N),null,{default:M((()=>[_(T(le))])),_:1})],2),v("span",{class:L([T(l).e("btn"),T(l).e("next"),T(l).is("disabled",!e.infinite&&T(J))]),onClick:ve},[_(T(N),null,{default:M((()=>[_(T(ie))])),_:1})],2)],64)),B(" ACTIONS "),v("div",{class:L([T(l).e("btn"),T(l).e("actions")])},[v("div",{class:L(T(l).e("actions__inner"))},[_(T(N),{onClick:a[1]||(a[1]=e=>ge("zoomOut"))},{default:M((()=>[_(T(Be))])),_:1}),_(T(N),{onClick:a[2]||(a[2]=e=>ge("zoomIn"))},{default:M((()=>[_(T(Me))])),_:1}),v("i",{class:L(T(l).e("actions__divider"))},null,2),_(T(N),{onClick:me},{default:M((()=>[(f(),V(R(W.value.icon)))])),_:1}),v("i",{class:L(T(l).e("actions__divider"))},null,2),_(T(N),{onClick:a[3]||(a[3]=e=>ge("anticlockwise"))},{default:M((()=>[_(T(we))])),_:1}),_(T(N),{onClick:a[4]||(a[4]=e=>ge("clockwise"))},{default:M((()=>[_(T(ze))])),_:1})],2)],2),B(" CANVAS "),v("div",{class:L(T(l).e("canvas"))},[(f(!0),p(E,null,P(e.urlList,((e,a)=>H((f(),p("img",{ref_for:!0,ref:e=>d.value[a]=e,key:e,src:e,style:X(T(ee)),class:L(T(l).e("img")),onLoad:ne,onError:re,onMousedown:ue},null,46,De)),[[S,a===b.value]]))),128))],2),Y(e.$slots,"default")],6)])),_:3})],8,["disabled"]))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]));const Re=d({name:"ImageViewer",props:{urlList:{type:Array,default:()=>[]},zIndex:Q.number.def(200),initialIndex:Q.number.def(0),infinite:Q.bool.def(!0),hideOnClickModal:Q.bool.def(!1),appendToBody:Q.bool.def(!1),show:Q.bool.def(!1)},setup(e){const a=e,t=y((()=>{const e=i({},a);return delete e.show,e})),n=k(a.show),o=()=>{n.value=!1};return(e,a)=>n.value?(f(),V(T(Ee),U({key:0},T(t),{onClose:o}),null,16)):B("",!0)}});let Pe=null;const He=d({name:"ImageViewer",setup(e){const{t:a}=ee(),t=()=>{!function(e){if(!J)return;const{urlList:a,initialIndex:t=0,infinite:n=!0,hideOnClickModal:o=!1,appendToBody:s=!1,zIndex:l=2e3,show:i=!0}=e,r={},u=document.createElement("div");r.urlList=a,r.initialIndex=t,r.infinite=n,r.hideOnClickModal=o,r.appendToBody=s,r.zIndex=l,r.show=i,document.body.appendChild(u),Pe=_(Re,r),K(Pe,u)}({urlList:["https://img1.baidu.com/it/u=657828739,1486746195&fm=26&fmt=auto&gp=0.jpg","https://img0.baidu.com/it/u=3114228356,677481409&fm=26&fmt=auto&gp=0.jpg","https://img1.baidu.com/it/u=508846955,3814747122&fm=26&fmt=auto&gp=0.jpg","https://img1.baidu.com/it/u=3536647690,3616605490&fm=26&fmt=auto&gp=0.jpg","https://img1.baidu.com/it/u=4087287201,1148061266&fm=26&fmt=auto&gp=0.jpg","https://img2.baidu.com/it/u=3429163260,2974496379&fm=26&fmt=auto&gp=0.jpg"]})};return(e,n)=>(f(),V(T(u),{title:T(a)("imageViewerDemo.imageViewer"),message:T(a)("imageViewerDemo.imageViewerDes")},{default:M((()=>[_(T(ue),{type:"primary",onClick:t},{default:M((()=>[ae(te(T(a)("imageViewerDemo.open")),1)])),_:1})])),_:1},8,["title","message"]))}});export{He as default};
